// ==UserScript==
// @name         Nitro Type Cash Exploit
// @version      1.0.2
// @description  Generates cash on Nitro Type
// @author       Ray Adams
// @match        *://*.nitrotype.com/garage
// @grant        none
// ==/UserScript==

/*************************************

         Limitized/Nitro-EXP/...
    .../Ray's Scripts/cash.user.js
            Jun 19, 2020
      
         PATCHED JULY 2020
      
**************************************/

(function() {
    'use strict';

    const password = "ENTER PASSWORD HERE";
    const speed = 60; // Anything you want between 5 and 220 WPM

    function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) return parts.pop().split(";").shift();
    };

    var uhash = getCookie('ntuserrem');
    var encoded_uhash = encodeURI(uhash);

    setInterval(async function() {
        await fetch("https://www.nitrotype.com/api/race/save-qualifying", {
            "credentials": "include",
            "headers": {
                "Accept": "application/json, text/plain, */*",
                "Accept-Language": "en-US,en;q=0.5",
                "Prefer": "safe",
                "Content-Type": "application/x-www-form-urlencoded"
            },
            "referrer": "https://www.nitrotype.com/garage",
            "body": "carID=15&speed=" + speed + "&uhash=" + encoded_uhash,
            "method": "POST",
            "mode": "cors"
        });

        await fetch("https://www.nitrotype.com/api/cars/17/sell", {
            "credentials": "include",
            "headers": {
                "Accept": "application/json, text/plain, */*",
                "Accept-Language": "en-US,en;q=0.5",
                "Prefer": "safe",
                "Content-Type": "application/x-www-form-urlencoded"
            },
            "referrer": "https://www.nitrotype.com/garage",
            "body": "carID=17&password=" + password + "&uhash=" + encoded_uhash,
            "method": "POST",
            "mode": "cors"
        });

        await fetch("https://www.nitrotype.com/api/race/save-qualifying", {
            "credentials": "include",
            "headers": {
                "Accept": "application/json, text/plain, */*",
                "Accept-Language": "en-US,en;q=0.5",
                "Prefer": "safe",
                "Content-Type": "application/x-www-form-urlencoded"
            },
            "referrer": "https://www.nitrotype.com/garage",
            "body": "carID=17&speed=" + speed + "&uhash=" + encoded_uhash,
            "method": "POST",
            "mode": "cors"
        });

        await fetch("https://www.nitrotype.com/api/cars/15/sell", {
            "credentials": "include",
            "headers": {
                "Accept": "application/json, text/plain, */*",
                "Accept-Language": "en-US,en;q=0.5",
                "Prefer": "safe",
                "Content-Type": "application/x-www-form-urlencoded"
            },
            "referrer": "https://www.nitrotype.com/garage",
            "body": "carID=15&password=" + password + "&uhash=" + encoded_uhash,
            "method": "POST",
            "mode": "cors"
        });
    }, 30);

    setInterval(function() {
        location.reload();
    }, 60000);

})();
